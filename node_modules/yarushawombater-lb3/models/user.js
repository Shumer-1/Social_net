import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';
import { dirname } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirnamePath = dirname(__filename);

const usersFilePath = path.join(__dirnamePath, '../data/users.json');
let users = JSON.parse(fs.readFileSync(usersFilePath, 'utf8'));

export const findUserById = (id) => {
    return users.find(user => user.id === parseInt(id));
};


export const saveUsers = () => {
    fs.writeFileSync(usersFilePath, JSON.stringify(users, null, 2), 'utf8');
};

export { users };
